#!/bin/bash

usage() {
  echo "Usage: $(basename "$0") [-h] repo [jq_query]"
}
while getopts "h" arg; do
  case $arg in
    h)
      usage
      exit 0
    ;;
    *)
      usage
      exit 1
    ;;
  esac
done
shift $((OPTIND - 1))
if [[ $# -ne 1 ]] && [[ $# -ne 2 ]]; then
  usage
  exit 0
fi

readonly repo=$1
readonly jq_query=$2

if [[ $# -eq 1 ]]; then
  curl --no-progress-meter "https://api.github.com/repos/$repo/releases/latest"

else
  curl --no-progress-meter "https://api.github.com/repos/$repo/releases/latest" | jq -r "$jq_query"
fi